<!DOCTYPE HTML>
<html xmlns:th="http://www.thymeleaf.org">
<head th:replace="~{fragments/header :: header}" >
    <style>
        .container {
            max-width: 560px;
        }
        .field-error {
            border-color: #dc3545;
            color: #dc3545;
        }
    </style>
</head>
<body>

<div class="container">
    <div th:replace="~{fragments/bodyHeader :: bodyHeader}"/>
    <h4 th:if="${flag}" th:style="'color:red'" th:text="'재고수량이 초과되었습니다 다시 입력해 주세요'"></h4>
    <form role="form" action="/order" method="post" id="orderForm">

        <div class="form-group">
            <label for="item">상품명</label>
            <select name="itemId" id="item" class="form-control">
                <option value="">상품선택</option>
                <option th:each="item : ${items}"
                        th:value="${item.id}"
                        th:text="${item.name}" />
            </select>
        </div>

        <div class="form-group">
            <label for="count">주문수량</label>
            <input type="number" name="count" class="form-control" id="count" placeholder="주문 수량을 입력하세요" >
        </div>
        <button type="submit" class="btn btn-primary" id="submitButton" disabled>Submit</button>
    </form>
    <br/>
    <div th:replace="~{fragments/footer :: footer}" />

</div> <!-- /container -->

<script>
    // JavaScript code
    var itemSelect = document.getElementById("item");
    var countInput = document.getElementById("count");
    var submitButton = document.getElementById("submitButton");

    // Initial check for the submit button
    checkSubmitButtonStatus();

    // Function to check and enable/disable the submit button
    function checkSubmitButtonStatus() {
        var itemValue = itemSelect.value;
        var countValue = countInput.value;

        // Verification logic: Enable the button if both item and count are valid
        if (itemValue !== "" && countValue > 0) {
            submitButton.disabled = false;
        } else {
            submitButton.disabled = true;
        }
    }

    // Event listeners
    itemSelect.addEventListener("change", checkSubmitButtonStatus);
    countInput.addEventListener("input", checkSubmitButtonStatus);
</script>


</body>
</html>
